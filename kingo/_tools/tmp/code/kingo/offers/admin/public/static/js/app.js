webpackJsonp([1],{"/YqZ":function(t,e){},E51W:function(t,e){},KL4p:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),s=a("7+uW"),i=a("NYxO"),n=a("/ocq"),l=a("mtWM"),c=a.n(l),u=a("//Fk"),m=a.n(u),p=a("zL8q"),d=a.n(p),f=function(t){t.interceptors.response.use(function(t){var e=t.data,a=e.msg,r=e.code,o=e.data,s=e.flash;return s.error&&s.error.length>0&&s.error.forEach(function(t){d.a.Notification({title:"错误",message:t,type:"error"})}),s.warning&&s.warning.length>0&&s.warning.forEach(function(t){d.a.Notification({title:"警告",message:t,type:"warning"})}),s.info&&s.info.length>0&&s.info.forEach(function(t){d.a.Notification({title:"消息",message:t,type:"info"})}),s.success&&s.success.length>0&&s.success.forEach(function(t){d.a.Notification({title:"成功",message:t,type:"success"})}),0!==r?(d.a.Message({message:a,type:"error"}),m.a.reject(new Error(a))):o})},g=c.a.create({baseURL:window.authBaseUrl,headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0});f(g);var v=g,y=c.a.create({baseURL:window.requestBaseUrl,headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0});f(y);var h=y,_={session:function(){return v.get("/session")},login:function(t,e){return v.post("/login",{username:t,password:e})},logout:function(){return v.get("/logout")},offers:{list:function(t){return h.get("/offers",{params:t})}},strategies:{list:function(t){return h.get("/strategies",{params:t})}},strategy:{add:function(t,e,a,r,o,s,i,n){return h.post("/strategy/add",{name:t,description:e,priority:a,client:r,geo2:o,geo3:s,start_at:i,end_at:n})},get:function(t){return h.get("/strategy/"+t)},update:function(t,e,a,r,o,s,i,n,l){return h.post("/strategy/edit/"+t,{name:e,description:a,priority:r,client:o,geo2:s,geo3:i,start_at:n,end_at:l})},delete:function(t){return h.post("/strategy/delete/"+t)},deleteExt:function(t){return h.post("/strategy/delete-ext/"+t)},addExt:function(t,e,a,r,o){return h.post("/strategy/add-ext",{strategy_id:t,category:e,type:a,value1:r,value2:o})}}};s.default.use(i.a);var b=new i.a.Store({modules:{ui:{state:{path:"/",htmlTitle:"OFFER 总库"},mutations:{path:function(t,e){t.path=e}}}}}),x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var F=a("VU/8")({name:"App"},x,!1,function(t){a("/YqZ")},null,null).exports,w={data:function(){return{form:{username:"",password:""},rules:{username:[{validate:function(t){return!!t},message:"必须填写用户名"}],password:[{validate:function(t){return!!t},message:"必须填写密码"}]},checked:!0,passwordVisibility:!1}},methods:{submit:function(){var t=this;this.$refs.form.validate().then(function(e){if(!e)return console.log("error submit!!"),!1;t.$api.login(t.form.username,t.form.password).then(function(e){sessionStorage.setItem("user",o()(e.user)),t.$message({message:"欢迎回来！"+e.user.username,type:"success"}),t.$router.push("/")}).catch(function(){})})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mu-container",{staticClass:"login-container"},[a("mu-form",{ref:"form",staticClass:"login-form",attrs:{model:t.form,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[t._v("管理员登录")]),t._v(" "),a("mu-form-item",{attrs:{prop:"username",rules:t.rules.username}},[a("mu-text-field",{attrs:{prop:"username","auto-complete":"off",placeholder:"用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("mu-form-item",{attrs:{prop:"password",rules:t.rules.password}},[a("mu-text-field",{attrs:{prop:"password","auto-complete":"off",placeholder:"密码","action-icon":t.passwordVisibility?"visibility_off":"visibility","action-click":function(){return t.passwordVisibility=!t.passwordVisibility},type:t.passwordVisibility?"text":"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("mu-form-item",[a("mu-flex",{staticStyle:{width:"100%"},attrs:{"align-items":"center","justify-content":"between"}},[a("mu-checkbox",{attrs:{label:"自动登录"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),t._v(" "),a("mu-button",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var E={render:function(){var t=this.$createElement;return(this._self._c||t)("p",{staticClass:"page-container"},[this._v("404 page not found")])},staticRenderFns:[]};var S={data:function(){return{user:{},drawerOpen:!1,drawerDocked:!1}},methods:{logout:function(){var t=this;this.$confirm("确认退出吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.logout().then(function(e){sessionStorage.removeItem("user"),t.$router.push("/login")})}).catch(function(){})},drawerToggle:function(){this.drawerOpen=!this.drawerOpen},drawerNavChange:function(t){this.$store.commit("path",t),this.$router.push(t)}},mounted:function(){var t=sessionStorage.getItem("user");t&&(t=JSON.parse(t),this.user=t)}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mu-container",{staticStyle:{padding:"0px"},attrs:{fluid:""}},[a("mu-row",[a("mu-col",{attrs:{span:"12"}},[a("mu-appbar",{staticStyle:{width:"100%",position:"fixed"},attrs:{color:"primary"}},[a("mu-button",{attrs:{slot:"left",icon:""},nativeOn:{click:function(e){return t.drawerToggle(e)}},slot:"left"},[a("mu-icon",{attrs:{value:"menu"}})],1),t._v(" "),a("router-link",{staticStyle:{color:"inherit"},attrs:{to:"/"}},[t._v(t._s(t.$store.state.ui.htmlTitle))]),t._v(" "),a("mu-menu",{attrs:{slot:"right"},slot:"right"},[a("mu-button",{attrs:{flat:""}},[a("mu-icon",{attrs:{value:"account_circle",left:""}}),t._v(" "+t._s(t.user.username))],1),t._v(" "),a("mu-list",{attrs:{slot:"content"},slot:"content"},[a("mu-list-item",{attrs:{button:""},nativeOn:{click:function(e){return t.logout(e)}}},[a("mu-list-item-content",[a("mu-list-item-title",[t._v("退出登录")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("mu-row",[a("mu-col",{staticStyle:{"margin-top":"84px"},attrs:{span:"12"}},[a("router-view")],1)],1),t._v(" "),a("mu-drawer",{attrs:{open:t.drawerOpen,docked:t.drawerDocked},on:{"update:open":function(e){t.drawerOpen=e}}},[a("mu-list",[a("mu-list-item",[a("mu-list-item-content",[a("mu-list-item-title",[t._v("OFFER 总库")]),t._v(" "),a("mu-list-item-sub-title",[t._v("KINGO")])],1)],1)],1),t._v(" "),a("mu-divider"),t._v(" "),a("mu-list",{attrs:{value:t.$store.state.ui.path},on:{change:t.drawerNavChange}},[a("mu-list-item",{attrs:{button:"",value:"/offers"}},[a("mu-list-item-title",[t._v("OFFER 库")])],1),t._v(" "),a("mu-list-item",{attrs:{button:"",value:"/strategies"}},[a("mu-list-item-title",[t._v("策略")])],1),t._v(" "),a("mu-list-item",{attrs:{button:"",value:"/statistics"}},[a("mu-list-item-title",[t._v("统计")])],1)],1)],1)],1)},staticRenderFns:[]},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mu-container",{attrs:{fluid:""}},[a("mu-row",[a("mu-col",{attrs:{span:"12"}},[a("mu-paper",{attrs:{"z-depth":1}},[a("el-form",{staticStyle:{padding:"18px 10px 0 10px",background:"#eef1f6"},attrs:{inline:"",model:t.form}},[a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{type:"text",placeholder:"ID"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{type:"text",placeholder:"来源"},model:{value:t.form.source,callback:function(e){t.$set(t.form,"source",e)},expression:"form.source"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{type:"text",placeholder:"名称"},model:{value:t.form.offerName,callback:function(e){t.$set(t.form,"offerName",e)},expression:"form.offerName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{type:"text",placeholder:"包名"},model:{value:t.form.packageName,callback:function(e){t.$set(t.form,"packageName",e)},expression:"form.packageName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{type:"text",placeholder:"国家"},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"mini"}},[a("mu-button",{attrs:{color:"primary",small:""},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v("  查询")])],1)],1),t._v(" "),a("mu-divider"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,"highlight-current-row":"","max-height":"680",stripe:"",size:"small"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"offer_name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"package_name",label:"包名",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payout_type",label:"支付",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payout",label:"价值",width:"100"}})],1),t._v(" "),a("mu-flex",{staticStyle:{padding:"10px"},attrs:{"justify-content":"end"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":t.page,"page-sizes":t.sizes,"page-size":t.size,total:t.total},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)],1)],1)},staticRenderFns:[]},M={data:function(){var t=this;return{data:[],page:1,size:25,total:0,panel:0,showCreateStrategyModal:!1,showEditStrategyModal:!1,showCreateStrategyExtModal:!1,createForm:{name:"",description:"",priority:0,client:"",geo2:"",geo3:"",start_at:"",end_at:""},editForm:{id:0,name:"",description:"",priority:0,client:"",geo2:"",geo3:"",start_at:"",end_at:""},createExtForm:{strategyId:0,category:"",type:"",value1:"",value2:""},rules:{name:[{required:!0,message:"请输入策略名称",trigger:"blur"}]},extRules:{value1:[{required:!0,message:"请输入值1",trigger:"blur"}],value2:[{validator:function(e,a,r){"package_size"===t.createExtForm.category&&""===a?r(new Error("包大小必须输入值2")):"country"===t.createExtForm.category&&""===a?r(new Error("国家必须输入值2")):r()},trigger:"blur"}]}}},methods:{getData:function(){var t=this;this.$api.strategies.list({page:this.page,size:this.size}).then(function(e){t.data=e.data,t.total=e.total})},togglePanel:function(t){this.panel=t===this.panel?0:t},pager:function(t){this.page=t,this.getData()},openCreateStrategyExtModal:function(t,e,a){this.createExtForm.strategyId=t,this.createExtForm.category=e,this.createExtForm.type=a,this.createExtForm.value1="",this.createExtForm.value2="",this.showCreateStrategyExtModal=!0,this.$refs.createExtForm&&this.$refs.createExtForm.resetFields()},openEditStrategyModal:function(t){var e=this;this.editForm={id:0,name:"",description:"",priority:0,client:"",geo2:"",geo3:"",start_at:"",end_at:""},this.$refs.editForm&&this.$refs.editForm.resetFields(),this.$api.strategy.get(t).then(function(t){e.editForm={id:t.base.id,name:t.base.name,description:t.base.description,priority:t.base.priority,client:t.base.client,geo2:t.base.geo2,geo3:t.base.geo3,start_at:t.base.start_at,end_at:t.base.end_at},e.showEditStrategyModal=!0}).catch(function(){})},editStrategy:function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$api.strategy.update(t.editForm.id,t.editForm.name,t.editForm.description,t.editForm.priority,t.editForm.client,t.editForm.geo2,t.editForm.geo3,t.editForm.start_at,t.editForm.end_at).then(function(){t.getData(),t.showEditStrategyModal=!1}).catch(function(){})})},deleteStrategy:function(t){var e=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.strategy.delete(t).then(function(){e.getData()})}).catch(function(){})},openCreateStrategyModal:function(){this.createForm={name:"",description:"",priority:0,client:"",geo2:"",geo3:"",start_at:"",end_at:""},this.$refs.createForm&&this.$refs.createForm.resetFields(),this.showCreateStrategyModal=!0},createStrategy:function(){var t=this;this.$refs.createForm.validate(function(e){e&&t.$api.strategy.add(t.createForm.name,t.createForm.description,t.createForm.priority,t.createForm.client,t.createForm.geo2,t.createForm.geo3,t.createForm.start_at,t.createForm.end_at).then(function(){t.getData(),t.showCreateStrategyModal=!1}).catch(function(){})})},tableSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(0===t.columnIndex)return e%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},removeExtTag:function(t){var e=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.strategy.deleteExt(t).then(function(){e.getData()})}).catch(function(){})},createStrategyExt:function(){var t=this;this.$refs.createExtForm.validate(function(e){e&&t.$api.strategy.addExt(t.createExtForm.strategyId,t.createExtForm.category,t.createExtForm.type,t.createExtForm.value1,t.createExtForm.value2).then(function(){t.showCreateStrategyExtModal=!1,t.getData()}).catch(function(){})})}},mounted:function(){this.getData()}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mu-container",{attrs:{fluid:""}},[a("mu-row",{staticStyle:{"margin-bottom":"16px"}},[a("mu-col",{attrs:{span:12}},[a("mu-flex",{attrs:{"align-items":"center","justify-content":"between"}},[a("mu-button",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.openCreateStrategyModal(e)}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" 添加策略")]),t._v(" "),a("mu-pagination",{attrs:{raised:"",circle:"",total:t.total,current:t.page,"page-size":t.size},on:{"update:current":function(e){t.page=e},change:t.pager}})],1)],1)],1),t._v(" "),a("mu-row",[a("mu-col",{attrs:{span:12}},t._l(t.data,function(e,r){return a("mu-expansion-panel",{key:r,attrs:{expand:t.panel===e.base.id},on:{change:function(a){t.togglePanel(e.base.id)}}},[a("div",{staticStyle:{width:"100%"},attrs:{slot:"header"},slot:"header"},[a("mu-flex",{attrs:{"justify-content":"between","align-items":"center"}},[a("div",{staticStyle:{width:"10%"}},[e.base.priority>0?[a("strong",{staticStyle:{color:"red"}},[t._v(t._s(e.base.name))]),t._v(" \n              ")]:[a("strong",{staticStyle:{color:"gray"}},[t._v(t._s(e.base.name))]),t._v(" \n              ")]],2),t._v(" "),a("div",[a("small",[a("i",[t._v("国家: "),a("strong",[t._v(t._s(e.base.geo2?e.base.geo2:"全球")+"/"+t._s(e.base.geo3?e.base.geo3:"全球"))])])])]),t._v(" "),a("div",[a("small",[a("i",[t._v("起始: "),a("strong",[t._v(t._s(e.base.start_at?e.base.start_at:"无"))])])]),t._v(" \n              "),a("small",[a("i",[t._v("结束: "),a("strong",[t._v(t._s(e.base.end_at?e.base.end_at:"无"))])])])]),t._v(" "),a("div",[a("small",[a("i",[t._v("客户端: "),a("strong",[t._v(t._s(e.base.client?e.base.client:"不限"))])])])]),t._v(" "),a("div",[a("small",[a("i",[t._v("优先级: "),a("strong",[t._v(t._s(e.base.priority))])])])]),t._v(" "),a("div",[a("small",[a("i",[t._v("创建: "),a("strong",[t._v(t._s(e.base.create_at))]),t._v("  更新: "),a("strong",[t._v(t._s(e.base.update_at))])])]),t._v(" "),a("mu-button",{attrs:{small:"",flat:"",color:"primary"},on:{click:function(a){a.stopPropagation(),t.openEditStrategyModal(e.base.id)}}},[a("i",{staticClass:"fa fa-edit"}),t._v(" 编辑")]),t._v(" "),a("mu-button",{attrs:{small:"",flat:"",color:"secondary"},on:{click:function(a){a.stopPropagation(),t.deleteStrategy(e.base.id)}}},[a("i",{staticClass:"fa fa-remove"}),t._v(" 删除")])],1)])],1),t._v(" "),a("p",[t._v(t._s(e.base.description))]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"small","show-header":!1,border:"","span-method":t.tableSpanMethod,data:e.ext}},[a("el-table-column",{attrs:{prop:"category",label:"分类",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return a("strong",{},[t._v("\n              "+t._s("country"===e.row.category?"国家":"")+"\n              "+t._s("source"===e.row.category?"来源":"")+"\n              "+t._s("package_name"===e.row.category?"包名":"")+"\n              "+t._s("id"===e.row.category?"ID":"")+"\n              "+t._s("package_size"===e.row.category?"包大小":"")+"\n            ")])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return a("i",{},[t._v("\n              "+t._s("include"===e.row.type?"包含":"")+"\n              "+t._s("exclude"===e.row.type?"排除":"")+"\n            ")])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"values",label:"值"},scopedSlots:t._u([{key:"default",fn:function(r){return["package_size"===r.row.category?t._l(r.row.values,function(e,r){return a("el-tag",{key:r,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(a){t.removeExtTag(e.id)}}},[t._v("\n                  "+t._s(e.value1)+" 至 "+t._s(e.value2)+"\n                ")])}):"country"===r.row.category?t._l(r.row.values,function(e,r){return a("el-tag",{key:r,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(a){t.removeExtTag(e.id)}}},[t._v("\n                  "+t._s(e.value1)+" / "+t._s(e.value2)+"\n                ")])}):t._l(r.row.values,function(e,r){return a("el-tag",{key:r,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(a){t.removeExtTag(e.id)}}},[t._v("\n                  "+t._s(e.value1)+"\n                ")])}),t._v(" "),a("mu-button",{attrs:{color:"primary",small:"",flat:""},on:{click:function(a){t.openCreateStrategyExtModal(e.base.id,r.row.category,r.row.type)}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" ... 添加\n              ")])]}}])})],1)],1)}))],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showCreateStrategyModal,"append-to-body":"",top:"50px"},on:{"update:visible":function(e){t.showCreateStrategyModal=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"el-dialog__title"},[a("i",{staticClass:"fa fa-star-o"}),t._v(" 创建策略")])]),t._v(" "),a("el-form",{ref:"createForm",attrs:{model:t.createForm,"status-icon":"",rules:t.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.createForm.name,callback:function(e){t.$set(t.createForm,"name",e)},expression:"createForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description",size:"small"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},"auto-complete":"off"},model:{value:t.createForm.description,callback:function(e){t.$set(t.createForm,"description",e)},expression:"createForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级",prop:"priority",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.createForm.priority,callback:function(e){t.$set(t.createForm,"priority",e)},expression:"createForm.priority"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"客户端",prop:"client",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.createForm.client,callback:function(e){t.$set(t.createForm,"client",e)},expression:"createForm.client"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"国家 ISO3166-alpha-2",prop:"geo2",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.createForm.geo2,callback:function(e){t.$set(t.createForm,"geo2",e)},expression:"createForm.geo2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"国家 ISO3166-alpha-3",prop:"geo3",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.createForm.geo3,callback:function(e){t.$set(t.createForm,"geo3",e)},expression:"createForm.geo3"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"起始时间",prop:"start_at",size:"small"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.createForm.start_at,callback:function(e){t.$set(t.createForm,"start_at",e)},expression:"createForm.start_at"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"end_at",size:"small"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.createForm.end_at,callback:function(e){t.$set(t.createForm,"end_at",e)},expression:"createForm.end_at"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("mu-button",{on:{click:function(e){t.showCreateStrategyModal=!1}}},[t._v("取 消")]),t._v(" "),a("mu-button",{attrs:{color:"primary"},on:{click:t.createStrategy}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showEditStrategyModal,"append-to-body":"",top:"50px"},on:{"update:visible":function(e){t.showEditStrategyModal=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"el-dialog__title"},[a("i",{staticClass:"fa fa-edit"}),t._v(" 编辑策略")])]),t._v(" "),a("el-form",{ref:"editForm",attrs:{model:t.editForm,"status-icon":"",rules:t.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description",size:"small"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},"auto-complete":"off"},model:{value:t.editForm.description,callback:function(e){t.$set(t.editForm,"description",e)},expression:"editForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级",prop:"priority",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.editForm.priority,callback:function(e){t.$set(t.editForm,"priority",e)},expression:"editForm.priority"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"客户端",prop:"client",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.editForm.client,callback:function(e){t.$set(t.editForm,"client",e)},expression:"editForm.client"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"国家 ISO3166-alpha-2",prop:"geo2",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.editForm.geo2,callback:function(e){t.$set(t.editForm,"geo2",e)},expression:"editForm.geo2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"国家 ISO3166-alpha-3",prop:"geo3",size:"small"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.editForm.geo3,callback:function(e){t.$set(t.editForm,"geo3",e)},expression:"editForm.geo3"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"起始时间",prop:"start_at",size:"small"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.editForm.start_at,callback:function(e){t.$set(t.editForm,"start_at",e)},expression:"editForm.start_at"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"end_at",size:"small"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.editForm.end_at,callback:function(e){t.$set(t.editForm,"end_at",e)},expression:"editForm.end_at"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("mu-button",{on:{click:function(e){t.showEditStrategyModal=!1}}},[t._v("取 消")]),t._v(" "),a("mu-button",{attrs:{color:"primary"},on:{click:t.editStrategy}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showCreateStrategyExtModal,"append-to-body":"",width:"70%"},on:{"update:visible":function(e){t.showCreateStrategyExtModal=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"el-dialog__title"},[a("i",{staticClass:"fa fa-cogs"}),t._v(" 创建策略配置")])]),t._v(" "),a("el-form",{ref:"createExtForm",attrs:{inline:"",model:t.createExtForm,"status-icon":"",rules:t.extRules}},[a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.createExtForm.category,callback:function(e){t.$set(t.createExtForm,"category",e)},expression:"createExtForm.category"}},t._l([{label:"国家",value:"country"},{label:"来源",value:"source"},{label:"包名",value:"package_name"},{label:"ID",value:"id"},{label:"包大小",value:"package_size"}],function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.createExtForm.type,callback:function(e){t.$set(t.createExtForm,"type",e)},expression:"createExtForm.type"}},t._l([{label:"包含",value:"include"},{label:"排除",value:"exclude"}],function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{prop:"value1",label:"值1",size:"small"}},[a("el-input",{model:{value:t.createExtForm.value1,callback:function(e){t.$set(t.createExtForm,"value1",e)},expression:"createExtForm.value1"}})],1),t._v(" "),"package_size"===t.createExtForm.category||"country"===t.createExtForm.category?a("el-form-item",{attrs:{prop:"value2",label:"值2",size:"small"}},[a("el-input",{model:{value:t.createExtForm.value2,callback:function(e){t.$set(t.createExtForm,"value2",e)},expression:"createExtForm.value2"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("mu-button",{on:{click:function(e){t.showCreateStrategyExtModal=!1}}},[t._v("取 消")]),t._v(" "),a("mu-button",{attrs:{color:"primary"},on:{click:t.createStrategyExt}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var H=[{path:"/login",component:a("VU/8")(w,k,!1,function(t){a("bSHh")},"data-v-26a5052c",null).exports},{path:"/404",component:a("VU/8")(null,E,!1,function(t){a("wESK")},"data-v-67085b0a",null).exports},{path:"/",component:a("VU/8")(S,$,!1,null,null,null).exports,children:[{path:"offers",component:a("VU/8")({data:function(){return{data:[],loading:!1,page:1,size:25,sizes:[15,25,50],total:0,form:{id:"",source:"",offerName:"",packageName:"",country:"",payoutType:""}}},methods:{getData:function(){var t=this;this.loading=!0,this.$api.offers.list({page:this.page,size:this.size,id:this.form.id,source:this.form.source,name:this.form.offerName,package:this.form.packageName,country:this.form.country}).then(function(e){t.loading=!1,t.data=e.data,t.total=e.total})},pageSizeChange:function(t){this.size=t,this.getData()},pageCurrentChange:function(t){this.page=t,this.getData()},search:function(){this.getData()}},mounted:function(){this.getData()}},z,!1,null,null,null).exports},{path:"strategies",component:a("VU/8")(M,C,!1,function(t){a("KL4p")},"data-v-6753772a",null).exports}]},{path:"*",redirect:{path:"/404"}}],N=a("aFc6");a("uMhA"),a("e0XP"),a("E51W"),a("tvR6"),a("uTBe");s.default.config.productionTip=!1,s.default.prototype.$api=_,s.default.use(i.a),s.default.use(N.a),s.default.use(d.a),s.default.use(n.a);var R=new n.a({routes:H});R.beforeEach(function(t,e,a){R.app.$store.commit("path",t.path),JSON.parse(sessionStorage.getItem("user"))||"/login"===t.path?a():_.session().then(function(t){t.user?(sessionStorage.setItem("user",o()(t.user)),a()):(a("/login"),d.a.Message({message:"请重新登录",type:"warning"}))})}),new s.default({router:R,store:b,render:function(t){return t(F)}}).$mount("#app")},bSHh:function(t,e){},e0XP:function(t,e){},tvR6:function(t,e){},uMhA:function(t,e){},uTBe:function(t,e){},wESK:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map